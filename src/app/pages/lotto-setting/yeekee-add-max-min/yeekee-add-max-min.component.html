<div class="d-flex flex-row w-100 d-flex justify-content-start">
    <button-cancel wording="Back" (click)="goBack()"></button-cancel>
</div>
<br />
<ng-container>
    <app-content class="mb-2 mt-2" title="{{ className }} เพิ่ม Max-Min ">
        <app-content class="mb-2" title="3 ตัวบน">
            <div class="d-flex justify-content-end">
                <button-add wording="Add Max-Min" (click)="addRow('3DIGIT_TOP')"></button-add>
            </div>
            <form [formGroup]="formAddMaxmin">
                <table mat-table [dataSource]="dataSource1" class="table-striped mb-3" formArrayName="digit3top">

                    <ng-container matColumnDef="vipCode">
                        <th mat-header-cell *matHeaderCellDef> VIP </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="p-2 w-100 col-12" floatLabel="always">
                                <mat-label></mat-label>
                                <!-- <input type="number" matInput  /> -->
                                <mat-select formControlName="vipCode" [disabled]="index == 0">
                                    <mat-option *ngFor="let option of getList('3DIGIT_TOP',row.value.vipCode); let j = index"
                                        [value]='option.code'>
                                        {{option.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="minimumPerTran">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อขั้นต่ำต่อเลขต่อโพย (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="minimumTrans" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="maximumPerTran">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อสูงสุดต่อเลขต่อโพย (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="maximumTrans" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="maximumPerUser">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อสูงสุดต่อเลขต่อ username (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="maximumUsername" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Action </th>
                        <td mat-cell *matCellDef="let element; let i = index">
                            <div *ngIf="i != 0" style="text-align: center;">
                                <button mat-icon-button style="color: red" (click)="dropRow(element,i)">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </div>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index"></tr>
                </table>
                <div *ngIf="!dataSource1" class="d-flex flex-row justify-content-center mt-3 mb-3">
                    <span style="color: gray">No Data</span>
                </div>
            </form>
        </app-content>
        <app-content class="mb-2" title="3 ตัวโต๊ด">
            <div class="d-flex justify-content-end">
                <button-add wording="Add Max-Min" (click)="addRow('3DIGIT_SWAPPED')"></button-add>
            </div>
            <form [formGroup]="formAddMaxmin">
                <table mat-table [dataSource]="dataSource2" class="table-striped mb-3" formArrayName="digit3swap">

                    <ng-container matColumnDef="vipCode">
                        <th mat-header-cell *matHeaderCellDef> VIP </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="p-2 w-100 col-12" floatLabel="always">
                                <mat-label></mat-label>
                                <!-- <input type="number" matInput  /> -->
                                <mat-select formControlName="vipCode" [disabled]="index == 0">
                                    <mat-option *ngFor="let option of getList('3DIGIT_SWAPPED',row.value.vipCode); let j = index"
                                        [value]='option.code'>
                                        {{option.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="minimumPerTran">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อขั้นต่ำต่อเลขต่อโพย (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="minimumTrans" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="maximumPerTran">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อสูงสุดต่อเลขต่อโพย (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="maximumTrans" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="maximumPerUser">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อสูงสุดต่อเลขต่อ username (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="maximumUsername" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Action </th>
                        <td mat-cell *matCellDef="let element; let i = index">
                            <div *ngIf="i != 0" style="text-align: center;">
                                <button mat-icon-button style="color: red" (click)="dropRow(element,i)">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </div>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index"></tr>
                </table>
                <div *ngIf="!dataSource2" class="d-flex flex-row justify-content-center mt-3 mb-3">
                    <span style="color: gray">No Data</span>
                </div>
            </form>
        </app-content>
        <app-content class="mb-2" title="2 ตัวบน">
            <div class="d-flex justify-content-end">
                <button-add wording="Add Max-Min" (click)="addRow('2DIGIT_TOP')"></button-add>
            </div>
            <form [formGroup]="formAddMaxmin">
                <table mat-table [dataSource]="dataSource3" class="table-striped mb-3" formArrayName="digit2top">

                    <ng-container matColumnDef="vipCode">
                        <th mat-header-cell *matHeaderCellDef> VIP </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="p-2 w-100 col-12" floatLabel="always">
                                <mat-label></mat-label>
                                <!-- <input type="number" matInput  /> -->
                                <mat-select formControlName="vipCode" [disabled]="index == 0">
                                    <mat-option *ngFor="let option of getList('2DIGIT_TOP',row.value.vipCode); let j = index"
                                        [value]='option.code'>
                                        {{option.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="minimumPerTran">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อขั้นต่ำต่อเลขต่อโพย (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="minimumTrans" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="maximumPerTran">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อสูงสุดต่อเลขต่อโพย (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="maximumTrans" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="maximumPerUser">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อสูงสุดต่อเลขต่อ username (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="maximumUsername" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Action </th>
                        <td mat-cell *matCellDef="let element; let i = index">
                            <div *ngIf="i != 0" style="text-align: center;">
                                <button mat-icon-button style="color: red" (click)="dropRow(element,i)">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </div>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index"></tr>
                </table>
                <div *ngIf="!dataSource3" class="d-flex flex-row justify-content-center mt-3 mb-3">
                    <span style="color: gray">No Data</span>
                </div>
            </form>
        </app-content>
        <app-content class="mb-2" title="2 ตัวล่าง">
            <div class="d-flex justify-content-end">
                <button-add wording="Add Max-Min" (click)="addRow('2DIGIT_BOT')"></button-add>
            </div>
            <form [formGroup]="formAddMaxmin">
                <table mat-table [dataSource]="dataSource4" class="table-striped mb-3" formArrayName="digit2bot">

                    <ng-container matColumnDef="vipCode">
                        <th mat-header-cell *matHeaderCellDef> VIP </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="p-2 w-100 col-12" floatLabel="always">
                                <mat-label></mat-label>
                                <!-- <input type="number" matInput  /> -->
                                <mat-select formControlName="vipCode" [disabled]="index == 0">
                                    <mat-option *ngFor="let option of getList('2DIGIT_BOT',row.value.vipCode); let j = index"
                                        [value]='option.code'>
                                        {{option.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="minimumPerTran">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อขั้นต่ำต่อเลขต่อโพย (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="minimumTrans" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="maximumPerTran">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อสูงสุดต่อเลขต่อโพย (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="maximumTrans" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="maximumPerUser">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อสูงสุดต่อเลขต่อ username (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="maximumUsername" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Action </th>
                        <td mat-cell *matCellDef="let element; let i = index">
                            <div *ngIf="i != 0" style="text-align: center;">
                                <button mat-icon-button style="color: red" (click)="dropRow(element,i)">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </div>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index"></tr>
                </table>
                <div *ngIf="!dataSource4" class="d-flex flex-row justify-content-center mt-3 mb-3">
                    <span style="color: gray">No Data</span>
                </div>
            </form>
        </app-content>
        <app-content class="mb-2" title="วิ่งบน">
            <div class="d-flex justify-content-end">
                <button-add wording="Add Max-Min" (click)="addRow('1DIGIT_TOP')"></button-add>
            </div>
            <form [formGroup]="formAddMaxmin">
                <table mat-table [dataSource]="dataSource5" class="table-striped mb-3" formArrayName="digit1top">

                    <ng-container matColumnDef="vipCode">
                        <th mat-header-cell *matHeaderCellDef> VIP </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="p-2 w-100 col-12" floatLabel="always">
                                <mat-label></mat-label>
                                <!-- <input type="number" matInput  /> -->
                                <mat-select formControlName="vipCode" [disabled]="index == 0">
                                    <mat-option *ngFor="let option of getList('1DIGIT_TOP',row.value.vipCode); let j = index"
                                        [value]='option.code'>
                                        {{option.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="minimumPerTran">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อขั้นต่ำต่อเลขต่อโพย (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="minimumTrans" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="maximumPerTran">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อสูงสุดต่อเลขต่อโพย (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="maximumTrans" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="maximumPerUser">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อสูงสุดต่อเลขต่อ username (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="maximumUsername" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Action </th>
                        <td mat-cell *matCellDef="let element; let i = index">
                            <div *ngIf="i != 0" style="text-align: center;">
                                <button mat-icon-button style="color: red" (click)="dropRow(element,i)">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </div>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index"></tr>
                </table>
                <div *ngIf="!dataSource5" class="d-flex flex-row justify-content-center mt-3 mb-3">
                    <span style="color: gray">No Data</span>
                </div>
            </form>
        </app-content>
        <app-content class="mb-2" title="วิ่งล่าง">
            <div class="d-flex justify-content-end">
                <button-add wording="Add Max-Min" (click)="addRow('1DIGIT_BOT')"></button-add>
            </div>
            <form [formGroup]="formAddMaxmin">
                <table mat-table [dataSource]="dataSource6" class="table-striped mb-3" formArrayName="digit1bot">

                    <ng-container matColumnDef="vipCode">
                        <th mat-header-cell *matHeaderCellDef> VIP </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="p-2 w-100 col-12" floatLabel="always">
                                <mat-label></mat-label>
                                <!-- <input type="number" matInput  /> -->
                                <mat-select formControlName="vipCode" [disabled]="index == 0">
                                    <mat-option *ngFor="let option of getList('1DIGIT_BOT',row.value.vipCode); let j = index"
                                        [value]='option.code'>
                                        {{option.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="minimumPerTran">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อขั้นต่ำต่อเลขต่อโพย (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="minimumTrans" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="maximumPerTran">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อสูงสุดต่อเลขต่อโพย (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="maximumTrans" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="maximumPerUser">
                        <th mat-header-cell *matHeaderCellDef> จำนวนซื้อสูงสุดต่อเลขต่อ username (฿) </th>
                        <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                            <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                                <input type='text' matInput formControlName="maximumUsername" (change)="onChange(index)" mask="separator.2"
                                    thousandSeparator="," style="text-align:left;" />
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Action </th>
                        <td mat-cell *matCellDef="let element; let i = index">
                            <div *ngIf="i != 0" style="text-align: center;">
                                <button mat-icon-button style="color: red" (click)="dropRow(element,i)">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </div>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index"></tr>
                </table>
                <div *ngIf="!dataSource6" class="d-flex flex-row justify-content-center mt-3 mb-3">
                    <span style="color: gray">No Data</span>
                </div>
            </form>
        </app-content>
    </app-content>
    <div mat-dialog-actions class="d-flex flex-row justify-content-center">
        <button-cancel wording="Back" class="mr-1" (click)="goBack()"></button-cancel>
        <button-save [disabled]="formAddMaxmin.status=='VALID'?false:true" (click)="onSave()"></button-save>
    </div>
</ng-container>