<!-- <div class="d-flex flex-column ">
  <app-content class="mt-3" title="ตรวจสอบผลหวย" subtitle="Logging">
    <div class="d-flex flex-lg-column flex-column ">
      <div class="flex-lg-row">
        <form [formGroup]="formFilter">
          <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
            <mat-label><span style="color: red;">*</span>Filter Lotto Category</mat-label>
            <mat-select formControlName="selectedCategory">
              <mat-option value=''>ALL</mat-option>
              <mat-option value='GOVERNMENT'>GOVERNMENT</mat-option>
              <mat-option value='STOCKS'>STOCKS</mat-option>
              <mat-option value='YEEKEE'>YEEKEE</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
            <mat-label><span style="color: red;">*</span>Filter Lotto Name</mat-label>
            <mat-select formControlName="selectedClassCode">
              <mat-option value=''>
                ALL
              </mat-option>
              <mat-option *ngFor="let item of lottoClassCode" [value]="item.lottoClassCode">
                {{item.className}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
            <mat-label><span style="color: red;">*</span>Username Search</mat-label>
            <input type="text" formControlName="usernameSearch" matInput />
          </mat-form-field>
          <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
            <mat-label><span style="color: red;">*</span>Installment Search</mat-label>
            <input type="text" formControlName="installmentSearch" matInput />
          </mat-form-field>
          <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
            <mat-label><span style="color: red;">*</span>Transaction Group Code Search</mat-label>
            <input type="text" formControlName="transactionGroupSearch" matInput />
          </mat-form-field>
        </form>

      </div>
    </div>
    <div class="d-flex flex-row justify-content-center">
      <button-reset (click)="resetSearch()"></button-reset>
      <button-search (click)="loadsearchConfirmTransation()"></button-search>
    </div>
    <div class="d-flex flex-row justify-content-end">
      <button mat-raised-button color="warn" (click)="submitAllTransaction(false)">REJECT ALL</button>
      &nbsp;
      &nbsp;
      <button mat-raised-button color="primary" (click)="submitAllTransaction(true)">APPROVE ALL</button>
    </div>

    <div style="overflow-x: auto">

      <app-table-mat [columns]="displayedColumnsTr" [length]='length' [dataInput]="dataSource" [displayedColumns]="tr2"
        [actionSetting]="actionSetting" (onPageChange)='pageChange($event)' (onSortChange)='sortChange($event)'>
      </app-table-mat>

    </div>
  </app-content>
</div> -->

<div class="d-flex flex-column ">
  <app-content class="mt-3" title="ตรวจสอบผลหวย" subtitle="Logging">
    <div class="d-flex flex-lg-column flex-column ">
      <div class="flex-lg-row">
        <form [formGroup]="formFilter">
          <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
            <mat-label><span style="color: red;">*</span>Filter Lotto Category</mat-label>
            <mat-select formControlName="selectedCategory">
              <mat-option value=''>ALL</mat-option>
              <mat-option value='GOVERNMENT'>GOVERNMENT</mat-option>
              <mat-option value='STOCKS'>STOCKS</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
            <mat-label><span style="color: red;">*</span>Filter Lotto Name</mat-label>
            <mat-select formControlName="selectedClassCode">
              <mat-option value=''>
                ALL
              </mat-option>
              <mat-option *ngFor="let item of lottoClassCode" [value]="item.lottoClassCode">
                {{item.className}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
            <mat-label><span style="color: red;">*</span>Filter Lotto Kind Name</mat-label>
            <mat-select formControlName="selectedKindCode">
              <mat-option value=''>
                ALL
              </mat-option>
              <mat-option [value]='item.msdLottoKindCode' *ngFor="let item of listKind">
                {{item.msdLottoKindName}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
            <mat-label><span style="color: red;">*</span>Username Search</mat-label>
            <input type="text" formControlName="usernameSearch" matInput />
          </mat-form-field>
          <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
            <mat-label><span style="color: red;">*</span>Installment Search</mat-label>
            <input type="text" formControlName="installmentSearch" matInput />
          </mat-form-field>
          <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
            <mat-label><span style="color: red;">*</span>Transaction Group Code Search</mat-label>
            <input type="text" formControlName="transactionGroupSearch" matInput />
          </mat-form-field>
        </form>

      </div>
    </div>
    <div class="d-flex flex-row justify-content-center">
      <button-reset (click)="resetSearch()"></button-reset>
      <button-search (click)="getSerchTransaction()"></button-search>
    </div>
    <div class="d-flex flex-row justify-content-between mt-3 mb-3">
      <div>
        <ng-container *ngIf="selection.selected.length">
          <button mat-raised-button color="warn" (click)="submitSelect(false)">REJECT SELECT</button>
          &nbsp;
          &nbsp;
          <button mat-raised-button color="primary" (click)="submitSelect(true)">APPROVE SELECT</button>
        </ng-container>
      </div>
      <div>
        <button mat-raised-button color="warn" (click)="submitAllTransaction(false)">REJECT ALL</button>
        &nbsp;
        &nbsp;
        <button mat-raised-button color="primary" (click)="submitAllTransaction(true)">APPROVE ALL</button>
      </div>
      
    </div>
    
    <!-- <div class="row align-items-center collapse m-form__group-actions m--margin-top-20 m--margin-bottom-20"
      [ngClass]="{'show' : selection.selected.length > 0}">
      <div class="col-xl-12">
        <div class="m-form__group m-form__group--inline">
          <div class="m-form__label m-form__label-no-wrap">
            <label class="m--font-bold m--font-danger-">เลือกทั้งหมด:
              {{ selection.selected.length }} แถว</label>
          </div>
          <div class="m-form__control m-form__group--inline">
            <button mat-raised-button color="accent" (click)="test()" matTooltip="ลบข้อมูลที่เลือกทั้งหมด">
              <mat-icon>delete</mat-icon> ลบทั้งหมด
            </button>&nbsp;
          </div>
        </div>
      </div>
    </div> -->

    <div style="overflow-x: auto">
      <table mat-table matSort [dataSource]="dataSource" class="table-striped  mb-3" matSort
        (matSortChange)="sortChange($event)">
        <ng-container matColumnDef="selected">
          <mat-header-cell *matHeaderCellDef class="mat-column-checkbox">
            <mat-checkbox (change)="masterToggle($event)"
            [checked]="selectAll">
              SELECT ALL
            </mat-checkbox>
          </mat-header-cell>
          <mat-cell *matCellDef="let row" class="mat-column-checkbox">
            <mat-checkbox (click)="$event.stopPropagation()"
              (change)="$event ? selectToggle($event,row) : null"
              [checked]="selection.isSelected(row['tb.lotto_transaction_id'])">
            </mat-checkbox>
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="lc.class_name">
          <th mat-header-cell *matHeaderCellDef>หวย</th>
          <td mat-cell *matCellDef="let element">
            {{element["lc.class_name"]}}
          </td>
        </ng-container>

        <ng-container matColumnDef="tb.username">
          <th mat-header-cell *matHeaderCellDef>username</th>
          <td mat-cell *matCellDef="let element">
            {{element["tb.username"]}}
          </td>
        </ng-container>

        <ng-container matColumnDef="tb.lotto_group_transaction_code">
          <th mat-header-cell *matHeaderCellDef>เลขที่โพย</th>
          <td mat-cell *matCellDef="let element">
            {{element["tb.lotto_group_transaction_code"]}}
          </td>
        </ng-container>

        <ng-container matColumnDef="mlk.msd_lotto_kind_name">
          <th mat-header-cell *matHeaderCellDef>ประเภท</th>
          <td mat-cell *matCellDef="let element">
            {{element["mlk.msd_lotto_kind_name"]}}
          </td>
        </ng-container>

        <ng-container matColumnDef="tb.lotto_number">
          <th mat-header-cell *matHeaderCellDef>เลขที่ถูก</th>
          <td mat-cell *matCellDef="let element">
            {{element["tb.lotto_number"]}}
          </td>
        </ng-container>

        <ng-container matColumnDef="tb.installment">
          <th mat-header-cell *matHeaderCellDef>งวด</th>
          <td mat-cell *matCellDef="let element">
            {{element["tb.installment"]}}
          </td>
        </ng-container>

        <ng-container matColumnDef="tb.pay_cost">
          <th mat-header-cell *matHeaderCellDef>ราคาซื้อ</th>
          <td mat-cell *matCellDef="let element">
            {{element["tb.pay_cost"] | number:"1.2-2"}}
          </td>
        </ng-container>

        <ng-container matColumnDef="tb.prize_cost">
          <th mat-header-cell *matHeaderCellDef>ราคาที่ถูก</th>
          <td mat-cell *matCellDef="let element">
            {{element["tb.prize_cost"] | number:"1.2-2"}}
          </td>
        </ng-container>

        <ng-container matColumnDef="tb.prize_corroect">
          <th mat-header-cell *matHeaderCellDef>รางวัล</th>
          <td mat-cell *matCellDef="let element">
            {{element["tb.prize_corroect"] | number:"1.2-2"}}
          </td>
        </ng-container>

        <ng-container matColumnDef="tb.status">
          <th mat-header-cell *matHeaderCellDef>status</th>
          <td mat-cell *matCellDef="let element">
            {{element["tb.status"]}}
          </td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef style="text-align: center;">Action</th>
          <td mat-cell *matCellDef="let element">
            <div class="d-flex flex-row justify-content-center">
              <button mat-raised-button color="warn" (click)="submitBySelectButton(false,element['tb.lotto_transaction_id'])">REJECT</button>
              &nbsp;
              &nbsp;
              <button mat-raised-button color="primary" (click)="submitBySelectButton(true,element['tb.lotto_transaction_id'])">APPROVE</button>
            </div>

          </td>
        </ng-container>


        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
      <div *ngIf="dataSource.length === 0" class="d-flex flex-row justify-content-center mt-1">
        <span style="color: gray">No Data</span>
      </div>
      <mat-paginator #paginator [length]="length" [pageSize]="10" [pageSizeOptions]="[10, 50, 100]" showFirstLastButtons
        (page)='pageChange($event)'>
      </mat-paginator>
      <!-- <app-table-mat [columns]="displayedColumnsTr" [length]='length' [dataInput]="dataSource" [displayedColumns]="tr2"
        [actionSetting]="actionSetting" (onPageChange)='pageChange($event)' (onSortChange)='sortChange($event)'>
      </app-table-mat> -->

    </div>
  </app-content>
</div>

<div class="d-flex flex-column ">
  <app-content class="mt-3" title="รายละเอียด" subtitle="Logging">
    <div style="overflow-x: auto">
      <div class="d-flex flex-lg-column flex-column ">
        <div class="flex-lg-row">
          <form [formGroup]="formFillterAll">
            <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
              <mat-label><span style="color: red;">*</span>Filter Lotto Category</mat-label>
              <mat-select formControlName="selectedCategory">
                <mat-option value=''>ALL</mat-option>
                <mat-option value='GOVERNMENT'>GOVERNMENT</mat-option>
                <mat-option value='STOCKS'>STOCKS</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
              <mat-label><span style="color: red;">*</span>Filter Lotto Name</mat-label>
              <mat-select formControlName="selectedClassCode">
                <mat-option value=''>
                  ALL
                </mat-option>
                <mat-option *ngFor="let item of lottoClassCode" [value]="item.lottoClassCode">
                  {{item.className}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
              <mat-label><span style="color: red;">*</span>Filter Lotto Kind Name</mat-label>
              <mat-select formControlName="selectedKindCode">
                <mat-option value=''>
                  ALL
                </mat-option>
                <mat-option [value]='item.msdLottoKindCode' *ngFor="let item of listKind">
                  {{item.msdLottoKindName}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
              <mat-label><span style="color: red;">*</span>Username Search</mat-label>
              <input type="text" formControlName="usernameSearch" matInput />
            </mat-form-field>
            <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
              <mat-label><span style="color: red;">*</span>Installment Search</mat-label>
              <input type="text" formControlName="installmentSearch" matInput />
            </mat-form-field>
            <mat-form-field floatLabel="always" appearance="outline" class="col-lg-2">
              <mat-label><span style="color: red;">*</span>Transaction Group Code Search</mat-label>
              <input type="text" formControlName="transactionGroupSearch" matInput />
            </mat-form-field>

          </form>

        </div>
      </div>
      <div class="d-flex flex-row justify-content-center">
        <button-reset (click)="resetSearch2()"></button-reset>
        <button-search (click)="loadAllTransaction()"></button-search>
      </div>

      <app-table-mat [columns]="displayedColumnsTr2" [length]='lengthAll' [dataInput]="dataSource2"
        [displayedColumns]="tr3" (onPageChange)='pageAllChange($event)' (onSortChange)='sortAllChange($event)'>
      </app-table-mat>
    </div>
  </app-content>
</div>



<!-- <button type="button"(click)="popup = true">
    SELECT
   </button>
   
   <div class="overlay" *ngIf="popup">
     <div class="popup">
       <h2>ยืนยันการทำรายการ</h2>
       <a class="close" (click)="popup = false">&times;</a>
       
        <button mat-raised-button color="primary" (click)="setApprovedSubmit(1)" >ยืนยัน</button>
        <button mat-raised-button color="warn" (click)="setApprovedSubmit(1)" >ยกเลิก</button>
       
     </div>
   </div> -->