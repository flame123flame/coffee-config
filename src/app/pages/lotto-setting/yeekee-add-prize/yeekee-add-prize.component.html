<app-content title="{{title}}" subtitle="Logging">
    <div class="d-flex flex-row pb-1 w-100 justify-content-end">
        <button-add wording="Add Prize " (click)="addRow()"></button-add>
    </div>
    <div style="overflow-x: auto">
        <form [formGroup]="formGroup">
            <table mat-table [dataSource]="dataSourceX" class="table-striped" formArrayName="data">
    
                <ng-container matColumnDef="vipCode">
                    <th mat-header-cell *matHeaderCellDef> VIP </th>
                    <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <mat-form-field appearance="outline" class="p-2 w-100 col-12" floatLabel="always">
                            <mat-label></mat-label>
                            <!-- <input type="number" matInput  /> -->
                            <mat-select formControlName="vipCode" [disabled]="index == 0">
                                <mat-option *ngFor="let option of getList(row.value.vipCode); let j = index"
                                    [value]='option.code'>
                                    {{option.name}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </td>
                </ng-container>
    
                <ng-container matColumnDef="digit3top">
                    <th mat-header-cell *matHeaderCellDef> ราคา 3 ตัวบน(฿) </th>
                    <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                            <input type='text' matInput formControlName="digit3top" mask="separator.2" thousandSeparator=","
                                style="text-align:left;" />
                        </mat-form-field>
                    </td>
                </ng-container>
                <ng-container matColumnDef="digit3swap">
                    <th mat-header-cell *matHeaderCellDef> ราคา 3 ตัวโต๊ด(฿) </th>
                    <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                            <input type='text' matInput formControlName="digit3swap" mask="separator.2" thousandSeparator=","
                                style="text-align:left;" />
                        </mat-form-field>
                    </td>
    
                </ng-container>
                <ng-container matColumnDef="digit2top">
                    <th mat-header-cell *matHeaderCellDef> ราคา 2 ตัวบน(฿) </th>
                    <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                            <input type='text' matInput formControlName="digit2top" mask="separator.2" thousandSeparator=","
                                style="text-align:left;" />
                        </mat-form-field>
                    </td>
                </ng-container>
                <ng-container matColumnDef="digit2bot">
                    <th mat-header-cell *matHeaderCellDef> ราคา 2 ล่าง(฿) </th>
                    <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                            <input type='text' matInput formControlName="digit2bot" mask="separator.2" thousandSeparator=","
                                style="text-align:left;" />
                        </mat-form-field>
                    </td>
                </ng-container>
    
                <ng-container matColumnDef="digit1top">
                    <th mat-header-cell *matHeaderCellDef> ราคา วิ่งบน(฿) </th>
                    <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                            <input type='text' matInput formControlName="digit1top" mask="separator.2" thousandSeparator=","
                                style="text-align:left;" />
                        </mat-form-field>
                    </td>
                </ng-container>
    
                <ng-container matColumnDef="digit1bot">
                    <th mat-header-cell *matHeaderCellDef> ราคา วิ่งล่าง(฿) </th>
                    <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <mat-form-field appearance="outline" class="w-100 p-1 col-lg-12 col-12" floatLabel="always">
                            <input type='text' matInput formControlName="digit1bot" mask="separator.2" thousandSeparator=","
                                style="text-align:left;" />
                        </mat-form-field>
                    </td>
                </ng-container>
    
                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Action </th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        <div *ngIf="i != 0" style="text-align: center;">
                            <button mat-icon-button style="color: red" (click)="dropRow(element,i)">
                                <mat-icon>delete</mat-icon>
                            </button>
                        </div>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index"></tr>
            </table>
        </form>
    </div>
</app-content>
<div mat-dialog-actions class="d-flex flex-row justify-content-center">
    <button-cancel wording="Back" class="mr-1" (click)="onCancel()"></button-cancel>
    <button-save [disabled]="formGroup.status=='VALID'?false:true" (click)="onSave()"></button-save>
</div>